/*!
*  angular-leaflet-directive 0.8.5 2015-07-03
*  angular-leaflet-directive - An AngularJS directive to easily interact with Leaflet maps
*  git: https://github.com/tombatossals/angular-leaflet-directive
*/
(function(n){"use strict";n.module("leaflet-directive",[]).directive("leaflet",["$q","leafletData","leafletMapDefaults","leafletHelpers","leafletEvents",function(n,t,i,r,u){return{restrict:"EA",replace:!0,scope:{center:"=",defaults:"=",maxbounds:"=",bounds:"=",markers:"=",legend:"=",geojson:"=",paths:"=",tiles:"=",layers:"=",controls:"=",decorations:"=",eventBroadcast:"=",markersWatchOptions:"=",geojsonWatchOptions:"="},transclude:!0,template:'<div class="angular-leaflet-map"><div ng-transclude><\/div><\/div>',controller:["$scope",function(t){this._leafletMap=n.defer();this.getMap=function(){return this._leafletMap.promise};this.getLeafletScope=function(){return t}}],link:function(n,f,e,o){function a(){isNaN(e.width)?f.css("width",e.width):f.css("width",e.width+"px")}function v(){isNaN(e.height)?f.css("height",e.height):f.css("height",e.height+"px")}var h=r.isDefined,c=i.setDefaults(n.defaults,e.id),p=u.getAvailableMapEvents(),w=u.addEvents,s,l,y;n.mapId=e.id;t.setDirectiveControls({},e.id);h(e.width)&&(a(),n.$watch(function(){return f[0].getAttribute("width")},function(){a();s.invalidateSize()}));h(e.height)&&(v(),n.$watch(function(){return f[0].getAttribute("height")},function(){v();s.invalidateSize()}));s=new L.Map(f[0],i.getMapCreationDefaults(e.id));o._leafletMap.resolve(s);h(e.center)||s.setView([c.center.lat,c.center.lng],c.center.zoom);h(e.tiles)||h(e.layers)||(l=L.tileLayer(c.tileLayer,c.tileLayerOptions),l.addTo(s),t.setTiles(l,e.id));h(s.zoomControl)&&h(c.zoomControlPosition)&&s.zoomControl.setPosition(c.zoomControlPosition);h(s.zoomControl)&&c.zoomControl===!1&&s.zoomControl.removeFrom(s);h(s.zoomsliderControl)&&h(c.zoomsliderControl)&&c.zoomsliderControl===!1&&s.zoomsliderControl.removeFrom(s);h(e.eventBroadcast)||(y="broadcast",w(s,p,"eventName",n,y));s.whenReady(function(){t.setMap(s,e.id)});n.$on("$destroy",function(){i.reset();s.remove();t.unresolveMap(e.id)});n.$on("invalidateSize",function(){s.invalidateSize()})}}}]);n.module("leaflet-directive").factory("leafletBoundsHelpers",["$log","leafletHelpers",function(t,i){function e(t){return n.isDefined(t)&&n.isDefined(t.southWest)&&n.isDefined(t.northEast)&&n.isNumber(t.southWest.lat)&&n.isNumber(t.southWest.lng)&&n.isNumber(t.northEast.lat)&&n.isNumber(t.northEast.lng)}var u=i.isArray,r=i.isNumber,f=i.isFunction,o=i.isDefined;return{createLeafletBounds:function(n){if(e(n))return L.latLngBounds([n.southWest.lat,n.southWest.lng],[n.northEast.lat,n.northEast.lng])},isValidBounds:e,createBoundsFromArray:function(n){if(!(u(n)&&n.length===2&&u(n[0])&&u(n[1])&&n[0].length===2&&n[1].length===2&&r(n[0][0])&&r(n[0][1])&&r(n[1][0])&&r(n[1][1]))){t.error("[AngularJS - Leaflet] The bounds array is not valid.");return}return{northEast:{lat:n[0][0],lng:n[0][1]},southWest:{lat:n[1][0],lng:n[1][1]}}},createBoundsFromLeaflet:function(n){if(!(o(n)&&f(n.getNorthEast)&&f(n.getSouthWest))){t.error("[AngularJS - Leaflet] The leaflet bounds is not valid object.");return}var i=n.getNorthEast(),r=n.getSouthWest();return{northEast:{lat:i.lat,lng:i.lng},southWest:{lat:r.lat,lng:r.lng}}}}}]);n.module("leaflet-directive").factory("leafletControlHelpers",["$rootScope","$log","leafletHelpers","leafletLayerHelpers","leafletMapDefaults",function(t,i,r,u,f){var e=r.isDefined,c=r.isObject,a=u.createLayer,s={},o=r.errorHeader+" [Controls] ",l=function(n,t,i){var u=f.getDefaults(i),r;return u.controls.layers.visible?(r=!1,c(n)&&Object.keys(n).forEach(function(t){var i=n[t];e(i.layerOptions)&&i.layerOptions.showOnSelector===!1||(r=!0)}),c(t)&&Object.keys(t).forEach(function(n){var i=t[n];e(i.layerParams)&&i.layerParams.showOnSelector===!1||(r=!0)}),r):!1},v=function(t){var i=f.getDefaults(t),r={collapsed:i.controls.layers.collapsed,position:i.controls.layers.position,autoZIndex:!1};return n.extend(r,i.controls.layers.options),i.controls.layers&&e(i.controls.layers.control)?i.controls.layers.control.apply(this,[[],[],r]):new L.control.layers([],[],r)},h={draw:{isPluginLoaded:function(){return n.isDefined(L.Control.Draw)?!0:(i.error(o+" Draw plugin is not loaded."),!1)},checkValidParams:function(){return!0},createControl:function(n){return new L.Control.Draw(n)}},scale:{isPluginLoaded:function(){return!0},checkValidParams:function(){return!0},createControl:function(n){return new L.control.scale(n)}},fullscreen:{isPluginLoaded:function(){return n.isDefined(L.Control.Fullscreen)?!0:(i.error(o+" Fullscreen plugin is not loaded."),!1)},checkValidParams:function(){return!0},createControl:function(n){return new L.Control.Fullscreen(n)}},search:{isPluginLoaded:function(){return n.isDefined(L.Control.Search)?!0:(i.error(o+" Search plugin is not loaded."),!1)},checkValidParams:function(){return!0},createControl:function(n){return new L.Control.Search(n)}},minimap:{isPluginLoaded:function(){return n.isDefined(L.Control.MiniMap)?!0:(i.error(o+" Minimap plugin is not loaded."),!1)},checkValidParams:function(n){return e(n.layer)?!0:(i.warn(o+' minimap "layer" option should be defined.'),!1)},createControl:function(n){var t=a(n.layer);if(!e(t)){i.warn(o+' minimap control "layer" could not be created.');return}return new L.Control.MiniMap(t,n)}}};return{layersControlMustBeVisible:l,isValidControlType:function(n){return Object.keys(h).indexOf(n)!==-1},createControl:function(n,t){if(h[n].checkValidParams(t))return h[n].createControl(t)},updateLayersControl:function(n,t,i,r,u,f){var o,h=s[t],c=l(r,u,t),a,y;if(e(h)&&i){for(o in f.baselayers)h.removeLayer(f.baselayers[o]);for(o in f.overlays)h.removeLayer(f.overlays[o]);n.removeControl(h);delete s[t]}if(c){h=v(t);s[t]=h;for(o in r)a=e(r[o].layerOptions)&&r[o].layerOptions.showOnSelector===!1,!a&&e(f.baselayers[o])&&h.addBaseLayer(f.baselayers[o],r[o].name);for(o in u)y=e(u[o].layerParams)&&u[o].layerParams.showOnSelector===!1,!y&&e(f.overlays[o])&&h.addOverlay(f.overlays[o],u[o].name);n.addControl(h)}return c}}}]);n.module("leaflet-directive").service("leafletData",["$log","$q","leafletHelpers",function(n,t,i){var e=i.getDefer,o=i.getUnresolvedDefer,s=i.setResolvedDefer,r={},f=this,h=function(n){return n.charAt(0).toUpperCase()+n.slice(1)},u=["map","tiles","layers","paths","markers","geoJSON","UTFGrid","decorations","directiveControls"];u.forEach(function(n){r[n]={}});this.unresolveMap=function(n){var t=i.obtainEffectiveMapId(r.map,n);u.forEach(function(n){r[n][t]=undefined})};u.forEach(function(n){var t=h(n);f["set"+t]=function(t,i){var u=o(r[n],i);u.resolve(t);s(r[n],i)};f["get"+t]=function(t){var i=e(r[n],t);return i.promise}})}]);n.module("leaflet-directive").service("leafletDirectiveControlsHelpers",["$log","leafletData","leafletHelpers",function(t,i,r){var u=r.isDefined,f=r.isString,e=r.isObject,o=r.errorHeader,s=o+"[leafletDirectiveControlsHelpers",h=function(r,o,h,c){var a=s+".extend] ",l={};if(!u(o)){t.error(a+"thingToAddName cannot be undefined");return}if(f(o)&&u(h)&&u(c))l[o]={create:h,clean:c};else{if(!e(o)||u(h)||u(c)){t.error(a+"incorrect arguments");return}l=o}i.getDirectiveControls().then(function(t){n.extend(t,l);i.setDirectiveControls(t,r)})};return{extend:h}}]);n.module("leaflet-directive").factory("leafletEvents",["leafletMapEvents","leafletMarkerEvents","leafletPathEvents","leafletIterators",function(t,i,r,u){var f=n.extend({},t,{bindMarkerEvents:i.bindEvents,getAvailableMarkerEvents:i.getAvailableEvents},r),e=f.genDispatchMapEvent;return f.addEvents=function(n,t,i,r,f){u.each(t,function(t){var u={};u[i]=t;n.on(t,e(r,t,f),u)})},f}]);n.module("leaflet-directive").service("leafletGeoJsonHelpers",["leafletHelpers","leafletIterators",function(t,i){var r=t,e=i,u=function(n,t){return this.lat=n,this.lng=t,this},o=function(n){return Array.isArray(n)&&n.length===2?n[1]:r.isDefined(n.type)&&n.type==="Point"?+n.coordinates[1]:+n.lat},s=function(n){return Array.isArray(n)&&n.length===2?n[0]:r.isDefined(n.type)&&n.type==="Point"?+n.coordinates[0]:+n.lng},f=function(n){if(r.isUndefined(n))return!1;if(r.isArray(n)){if(n.length===2&&r.isNumber(n[0])&&r.isNumber(n[1]))return!0}else if(r.isDefined(n.type)&&n.type==="Point"&&r.isArray(n.coordinates)&&n.coordinates.length===2&&r.isNumber(n.coordinates[0])&&r.isNumber(n.coordinates[1]))return!0;return e.all(["lat","lng"],function(t){return r.isDefined(n[t])&&r.isNumber(n[t])})},h=function(t){if(t&&f(t)){var i=null;if(Array.isArray(t)&&t.length===2)i=new u(t[1],t[0]);else if(r.isDefined(t.type)&&t.type==="Point")i=new u(t.coordinates[1],t.coordinates[0]);else return t;return n.extend(t,i)}};return{getLat:o,getLng:s,validateCoords:f,getCoords:h}}]);n.module("leaflet-directive").factory("leafletHelpers",["$q","$log",function(t,i){function r(t,r){var u,e;if(n.isDefined(r))u=r;else if(Object.keys(t).length===0)u="main";else if(Object.keys(t).length>=1)for(e in t)t.hasOwnProperty(e)&&(u=e);else Object.keys(t).length===0?u="main":i.error(f+"- You have more than 1 map on the DOM, you must provide the map ID to the leafletData.getXXX call");return u}function o(i,u){var f=r(i,u),e;return n.isDefined(i[f])&&i[f].resolvedDefer!==!0?e=i[f].defer:(e=t.defer(),i[f]={defer:e,resolvedDefer:!1}),e}var f="[AngularJS - Leaflet] ",e=n.copy,s=e,h=function(t,i){var r;if(t&&n.isObject(t))return i===null||!n.isString(i)?i:(r=t,i.split(".").forEach(function(n){r&&(r=r[n])}),r)},c=function(n){return n.split(".").reduce(function(n,t){return n+'["'+t+'"]'})},l=function(n){return n.reduce(function(n,t){return n+"."+t})},u=function(t){return n.isDefined(t)&&t!==null},a=function(n){return!u(n)};return{copy:e,clone:s,errorHeader:f,getObjectValue:h,getObjectArrayPath:c,getObjectDotPath:l,defaultTo:function(n,t){return u(n)?n:t},isTruthy:function(n){return n==="true"||n===!0},isEmpty:function(n){return Object.keys(n).length===0},isUndefinedOrEmpty:function(t){return n.isUndefined(t)||t===null||Object.keys(t).length===0},isDefined:u,isUndefined:a,isNumber:n.isNumber,isString:n.isString,isArray:n.isArray,isObject:n.isObject,isFunction:n.isFunction,equals:n.equals,isValidCenter:function(t){return n.isDefined(t)&&n.isNumber(t.lat)&&n.isNumber(t.lng)&&n.isNumber(t.zoom)},isValidPoint:function(t){return n.isDefined(t)?n.isArray(t)?t.length===2&&n.isNumber(t[0])&&n.isNumber(t[1]):n.isNumber(t.lat)&&n.isNumber(t.lng):!1},isSameCenterOnMap:function(n,t){var i=t.getCenter(),r=t.getZoom();return n.lat&&n.lng&&i.lat.toFixed(4)===n.lat.toFixed(4)&&i.lng.toFixed(4)===n.lng.toFixed(4)&&r===n.zoom?!0:!1},safeApply:function(n,t){var i=n.$root.$$phase;i==="$apply"||i==="$digest"?n.$eval(t):n.$evalAsync(t)},obtainEffectiveMapId:r,getDefer:function(t,i){var u=r(t,i);return n.isDefined(t[u])&&t[u].resolvedDefer!==!1?t[u].defer:o(t,i)},getUnresolvedDefer:o,setResolvedDefer:function(n,t){var i=r(n,t);n[i].resolvedDefer=!0},AwesomeMarkersPlugin:{isLoaded:function(){return n.isDefined(L.AwesomeMarkers)&&n.isDefined(L.AwesomeMarkers.Icon)},is:function(n){return this.isLoaded()?n instanceof L.AwesomeMarkers.Icon:!1},equal:function(t,i){return this.isLoaded()?this.is(t)?n.equals(t,i):!1:!1}},PolylineDecoratorPlugin:{isLoaded:function(){return n.isDefined(L.PolylineDecorator)?!0:!1},is:function(n){return this.isLoaded()?n instanceof L.PolylineDecorator:!1},equal:function(t,i){return this.isLoaded()?this.is(t)?n.equals(t,i):!1:!1}},MakiMarkersPlugin:{isLoaded:function(){return n.isDefined(L.MakiMarkers)&&n.isDefined(L.MakiMarkers.Icon)?!0:!1},is:function(n){return this.isLoaded()?n instanceof L.MakiMarkers.Icon:!1},equal:function(t,i){return this.isLoaded()?this.is(t)?n.equals(t,i):!1:!1}},ExtraMarkersPlugin:{isLoaded:function(){return n.isDefined(L.ExtraMarkers)&&n.isDefined(L.ExtraMarkers.Icon)?!0:!1},is:function(n){return this.isLoaded()?n instanceof L.ExtraMarkers.Icon:!1},equal:function(t,i){return this.isLoaded()?this.is(t)?n.equals(t,i):!1:!1}},LabelPlugin:{isLoaded:function(){return n.isDefined(L.Label)},is:function(n){return this.isLoaded()?n instanceof L.MarkerClusterGroup:!1}},MarkerClusterPlugin:{isLoaded:function(){return n.isDefined(L.MarkerClusterGroup)},is:function(n){return this.isLoaded()?n instanceof L.MarkerClusterGroup:!1}},GoogleLayerPlugin:{isLoaded:function(){return n.isDefined(L.Google)},is:function(n){return this.isLoaded()?n instanceof L.Google:!1}},ChinaLayerPlugin:{isLoaded:function(){return n.isDefined(L.tileLayer.chinaProvider)}},HeatLayerPlugin:{isLoaded:function(){return n.isDefined(L.heatLayer)}},WebGLHeatMapLayerPlugin:{isLoaded:function(){return n.isDefined(L.TileLayer.WebGLHeatMap)}},BingLayerPlugin:{isLoaded:function(){return n.isDefined(L.BingLayer)},is:function(n){return this.isLoaded()?n instanceof L.BingLayer:!1}},WFSLayerPlugin:{isLoaded:function(){return L.GeoJSON.WFS!==undefined},is:function(n){return this.isLoaded()?n instanceof L.GeoJSON.WFS:!1}},AGSBaseLayerPlugin:{isLoaded:function(){return L.esri!==undefined&&L.esri.basemapLayer!==undefined},is:function(n){return this.isLoaded()?n instanceof L.esri.basemapLayer:!1}},AGSLayerPlugin:{isLoaded:function(){return lvector!==undefined&&lvector.AGS!==undefined},is:function(n){return this.isLoaded()?n instanceof lvector.AGS:!1}},AGSFeatureLayerPlugin:{isLoaded:function(){return L.esri!==undefined&&L.esri.featureLayer!==undefined},is:function(n){return this.isLoaded()?n instanceof L.esri.featureLayer:!1}},AGSTiledMapLayerPlugin:{isLoaded:function(){return L.esri!==undefined&&L.esri.tiledMapLayer!==undefined},is:function(n){return this.isLoaded()?n instanceof L.esri.tiledMapLayer:!1}},AGSDynamicMapLayerPlugin:{isLoaded:function(){return L.esri!==undefined&&L.esri.dynamicMapLayer!==undefined},is:function(n){return this.isLoaded()?n instanceof L.esri.dynamicMapLayer:!1}},AGSImageMapLayerPlugin:{isLoaded:function(){return L.esri!==undefined&&L.esri.imageMapLayer!==undefined},is:function(n){return this.isLoaded()?n instanceof L.esri.imageMapLayer:!1}},AGSClusteredLayerPlugin:{isLoaded:function(){return L.esri!==undefined&&L.esri.clusteredFeatureLayer!==undefined},is:function(n){return this.isLoaded()?n instanceof L.esri.clusteredFeatureLayer:!1}},AGSHeatmapLayerPlugin:{isLoaded:function(){return L.esri!==undefined&&L.esri.heatmapFeatureLayer!==undefined},is:function(n){return this.isLoaded()?n instanceof L.esri.heatmapFeatureLayer:!1}},YandexLayerPlugin:{isLoaded:function(){return n.isDefined(L.Yandex)},is:function(n){return this.isLoaded()?n instanceof L.Yandex:!1}},GeoJSONPlugin:{isLoaded:function(){return n.isDefined(L.TileLayer.GeoJSON)},is:function(n){return this.isLoaded()?n instanceof L.TileLayer.GeoJSON:!1}},UTFGridPlugin:{isLoaded:function(){return n.isDefined(L.UtfGrid)},is:function(n){return this.isLoaded()?n instanceof L.UtfGrid:(i.error("[AngularJS - Leaflet] No UtfGrid plugin found."),!1)}},CartoDB:{isLoaded:function(){return cartodb},is:function(){return!0}},Leaflet:{DivIcon:{is:function(n){return n instanceof L.DivIcon},equal:function(t,i){return this.is(t)?n.equals(t,i):!1}},Icon:{is:function(n){return n instanceof L.Icon},equal:function(t,i){return this.is(t)?n.equals(t,i):!1}}},watchOptions:{doWatch:!0,isDeep:!0,individual:{doWatch:!0,isDeep:!0}}}}]);n.module("leaflet-directive").service("leafletIterators",["$log","leafletHelpers",function(n,t){var i=t,v=t.errorHeader+"leafletIterators: ",r=Object.keys,y=i.isFunction,p=i.isObject,w=Math.pow(2,53)-1,b=function(n){var t=n!==null&&n.length;return i.isNumber(t)&&t>=0&&t<=w},k=function(n){return n},d=function(n){return function(t){if(t!==null)return t[n]}},g=function(n,t,i){if(t===void 0)return n;switch(i===null?3:i){case 1:return function(i){return n.call(t,i)};case 2:return function(i,r){return n.call(t,i,r)};case 3:return function(i,r,u){return n.call(t,i,r,u)};case 4:return function(i,r,u,f){return n.call(t,i,r,u,f)}}return function(){return n.apply(t,arguments)}},nt=function(n,t){return function(i){var e=arguments.length,r,u,f;if(e<2||i===null)return i;for(r=1;r<e;r++){var o=arguments[r],s=n(o),h=s.length;for(u=0;u<h;u++)f=s[u],t&&i[f]!==void 0||(i[f]=o[f])}return i}},f,tt=null,e,o,s,h,c,u;f=tt=nt(r);e=function(n,t){var e=r(t),o=e.length,f,i,u;if(n===null)return!o;for(f=Object(n),i=0;i<o;i++)if(u=e[i],t[u]!==f[u]||!(u in f))return!1;return!0};s=null;o=s=function(n){return n=f({},n),function(t){return e(t,n)}};h=function(n,t,i){return n===null?k:y(n)?g(n,t,i):p(n)?o(n):d(n)};u=null;c=u=function(n,t,i){var f,o,u,e;for(t=h(t,i),f=!b(n)&&r(n),o=(f||n).length,u=0;u<o;u++)if(e=f?f[u]:u,!t(n[e],e,n))return!1;return!0};var l=function(t,r,u,f){return!u&&(!i.isDefined(t)||!i.isDefined(r))?!0:i.isFunction(r)?!1:(f=i.defaultTo(r,"cb"),n.error(v+f+" is not a function"),!0)},it=function(n,t,i){if(!l(undefined,i,!0,"internalCb")&&!l(n,t))for(var r in n)i(n[r],r)},a=function(n,t){it(n,t,function(n,i){t(n,i)})};return{each:a,forEach:a,every:c,all:u}}]);n.module("leaflet-directive").factory("leafletLayerHelpers",["$rootScope","$log","leafletHelpers","leafletIterators",function(t,i,r,u){function p(n){return h(n.type)?Object.keys(o).indexOf(n.type)===-1?(i.error("[AngularJS - Leaflet] A layer must have a valid type: "+Object.keys(o)),!1):o[n.type].mustHaveUrl&&!h(n.url)?(i.error("[AngularJS - Leaflet] A base layer must have an url"),!1):o[n.type].mustHaveData&&!s(n.data)?(i.error('[AngularJS - Leaflet] The base layer must have a "data" array attribute'),!1):o[n.type].mustHaveLayer&&!s(n.layer)?(i.error("[AngularJS - Leaflet] The type of layer "+n.type+" must have an layer defined"),!1):o[n.type].mustHaveBounds&&!s(n.bounds)?(i.error("[AngularJS - Leaflet] The type of layer "+n.type+" must have bounds defined"),!1):o[n.type].mustHaveKey&&!s(n.key)?(i.error("[AngularJS - Leaflet] The type of layer "+n.type+" must have key defined"),!1):!0:(i.error("[AngularJS - Leaflet] A layer must have a valid type defined."),!1)}function a(n){var t,r;if(p(n)){if(!h(n.name)){i.error("[AngularJS - Leaflet] A base layer must have a name");return}c(n.layerParams)||(n.layerParams={});c(n.layerOptions)||(n.layerOptions={});for(t in n.layerParams)n.layerOptions[t]=n.layerParams[t];return r={url:n.url,data:n.data,options:n.layerOptions,layer:n.layer,type:n.layerType,bounds:n.bounds,key:n.key,apiKey:n.apiKey,pluginOptions:n.pluginOptions,user:n.user},o[n.type].createLayer(r)}}var f=r,h=r.isString,c=r.isObject,v=r.isArray,s=r.isDefined,e=r.errorHeader,y=u,l=function(n){if(!f.UTFGridPlugin.isLoaded()){i.error("[AngularJS - Leaflet] The UTFGrid plugin is not loaded.");return}var r=new L.UtfGrid(n.url,n.pluginOptions);r.on("mouseover",function(n){t.$broadcast("leafletDirectiveMap.utfgridMouseover",n)});r.on("mouseout",function(n){t.$broadcast("leafletDirectiveMap.utfgridMouseout",n)});r.on("click",function(n){t.$broadcast("leafletDirectiveMap.utfgridClick",n)});r.on("mousemove",function(n){t.$broadcast("leafletDirectiveMap.utfgridMousemove",n)});return r},o={xyz:{mustHaveUrl:!0,createLayer:function(n){return L.tileLayer(n.url,n.options)}},mapbox:{mustHaveKey:!0,createLayer:function(n){var t=3,i;return s(n.options.version)&&n.options.version===4&&(t=n.options.version),i=t===3?"//{s}.tiles.mapbox.com/v3/"+n.key+"/{z}/{x}/{y}.png":"//api.tiles.mapbox.com/v4/"+n.key+"/{z}/{x}/{y}.png?access_token="+n.apiKey,L.tileLayer(i,n.options)}},geoJSON:{mustHaveUrl:!0,createLayer:function(n){if(f.GeoJSONPlugin.isLoaded())return new L.TileLayer.GeoJSON(n.url,n.pluginOptions,n.options)}},utfGrid:{mustHaveUrl:!0,createLayer:l},cartodbTiles:{mustHaveKey:!0,createLayer:function(n){var t="//"+n.user+".cartodb.com/api/v1/map/"+n.key+"/{z}/{x}/{y}.png";return L.tileLayer(t,n.options)}},cartodbUTFGrid:{mustHaveKey:!0,mustHaveLayer:!0,createLayer:function(n){return n.url="//"+n.user+".cartodb.com/api/v1/map/"+n.key+"/"+n.layer+"/{z}/{x}/{y}.grid.json",l(n)}},cartodbInteractive:{mustHaveKey:!0,mustHaveLayer:!0,createLayer:function(n){var i="//"+n.user+".cartodb.com/api/v1/map/"+n.key+"/{z}/{x}/{y}.png",r=L.tileLayer(i,n.options),t;return n.url="//"+n.user+".cartodb.com/api/v1/map/"+n.key+"/"+n.layer+"/{z}/{x}/{y}.grid.json",t=l(n),L.layerGroup([r,t])}},wms:{mustHaveUrl:!0,createLayer:function(n){return L.tileLayer.wms(n.url,n.options)}},wmts:{mustHaveUrl:!0,createLayer:function(n){return L.tileLayer.wmts(n.url,n.options)}},wfs:{mustHaveUrl:!0,mustHaveLayer:!0,createLayer:function(params){if(f.WFSLayerPlugin.isLoaded()){var options=n.copy(params.options);return options.crs&&"string"==typeof options.crs&&(options.crs=eval(options.crs)),new L.GeoJSON.WFS(params.url,params.layer,options)}}},group:{mustHaveUrl:!1,createLayer:function(n){var t=[];return y.each(n.options.layers,function(n){t.push(a(n))}),L.layerGroup(t)}},featureGroup:{mustHaveUrl:!1,createLayer:function(){return L.featureGroup()}},google:{mustHaveUrl:!1,createLayer:function(n){var t=n.type||"SATELLITE";if(f.GoogleLayerPlugin.isLoaded())return new L.Google(t,n.options)}},china:{mustHaveUrl:!1,createLayer:function(n){var t=n.type||"";if(f.ChinaLayerPlugin.isLoaded())return L.tileLayer.chinaProvider(t,n.options)}},agsBase:{mustHaveLayer:!0,createLayer:function(n){if(f.AGSBaseLayerPlugin.isLoaded())return L.esri.basemapLayer(n.layer,n.options)}},ags:{mustHaveUrl:!0,createLayer:function(t){var r,i;if(f.AGSLayerPlugin.isLoaded())return r=n.copy(t.options),n.extend(r,{url:t.url}),i=new lvector.AGS(r),i.onAdd=function(n){this.setMap(n)},i.onRemove=function(){this.setMap(null)},i}},agsFeature:{mustHaveUrl:!0,createLayer:function(n){if(!f.AGSFeatureLayerPlugin.isLoaded()){i.warn(e+" The esri plugin is not loaded.");return}return L.esri.featureLayer(n.url,n.options)}},agsTiled:{mustHaveUrl:!0,createLayer:function(n){if(!f.AGSTiledMapLayerPlugin.isLoaded()){i.warn(e+" The esri plugin is not loaded.");return}return L.esri.tiledMapLayer(n.url,n.options)}},agsDynamic:{mustHaveUrl:!0,createLayer:function(n){if(!f.AGSDynamicMapLayerPlugin.isLoaded()){i.warn(e+" The esri plugin is not loaded.");return}return L.esri.dynamicMapLayer(n.url,n.options)}},agsImage:{mustHaveUrl:!0,createLayer:function(n){if(!f.AGSImageMapLayerPlugin.isLoaded()){i.warn(e+" The esri plugin is not loaded.");return}return L.esri.imageMapLayer(n.url,n.options)}},agsClustered:{mustHaveUrl:!0,createLayer:function(n){if(!f.AGSClusteredLayerPlugin.isLoaded()){i.warn(e+" The esri clustered layer plugin is not loaded.");return}if(!f.MarkerClusterPlugin.isLoaded()){i.warn(e+" The markercluster plugin is not loaded.");return}return L.esri.clusteredFeatureLayer(n.url,n.options)}},agsHeatmap:{mustHaveUrl:!0,createLayer:function(n){if(!f.AGSHeatmapLayerPlugin.isLoaded()){i.warn(e+" The esri heatmap layer plugin is not loaded.");return}if(!f.HeatLayerPlugin.isLoaded()){i.warn(e+" The heatlayer plugin is not loaded.");return}return L.esri.heatmapFeatureLayer(n.url,n.options)}},markercluster:{mustHaveUrl:!1,createLayer:function(n){if(!f.MarkerClusterPlugin.isLoaded()){i.warn(e+" The markercluster plugin is not loaded.");return}return new L.MarkerClusterGroup(n.options)}},bing:{mustHaveUrl:!1,createLayer:function(n){if(f.BingLayerPlugin.isLoaded())return new L.BingLayer(n.key,n.options)}},webGLHeatmap:{mustHaveUrl:!1,mustHaveData:!0,createLayer:function(n){if(f.WebGLHeatMapLayerPlugin.isLoaded()){var t=new L.TileLayer.WebGLHeatMap(n.options);return s(n.data)&&t.setData(n.data),t}}},heat:{mustHaveUrl:!1,mustHaveData:!0,createLayer:function(n){if(f.HeatLayerPlugin.isLoaded()){var t=new L.heatLayer;return v(n.data)&&t.setLatLngs(n.data),c(n.options)&&t.setOptions(n.options),t}}},yandex:{mustHaveUrl:!1,createLayer:function(n){var t=n.type||"map";if(f.YandexLayerPlugin.isLoaded())return new L.Yandex(t,n.options)}},imageOverlay:{mustHaveUrl:!0,mustHaveBounds:!0,createLayer:function(n){return L.imageOverlay(n.url,n.bounds,n.options)}},custom:{createLayer:function(t){if(t.layer instanceof L.Class)return n.copy(t.layer);i.error("[AngularJS - Leaflet] A custom layer must be a leaflet Class")}},cartodb:{mustHaveUrl:!0,createLayer:function(n){return cartodb.createLayer(n.map,n.url)}}};return{createLayer:a}}]);n.module("leaflet-directive").factory("leafletLegendHelpers",function(){var n=function(n,t,i,r){var f,u,e,o;if(n.innerHTML="",t.error)n.innerHTML+='<div class="info-title alert alert-danger">'+t.error.message+"<\/div>";else if(i==="arcgis")for(f=0;f<t.layers.length;f++)for(u=t.layers[f],n.innerHTML+='<div class="info-title" data-layerid="'+u.layerId+'">'+u.layerName+"<\/div>",e=0;e<u.legend.length;e++)o=u.legend[e],n.innerHTML+='<div class="inline" data-layerid="'+u.layerId+'"><img src="data:'+o.contentType+";base64,"+o.imageData+'" /><\/div><div class="info-label" data-layerid="'+u.layerId+'">'+o.label+"<\/div>";else i==="image"&&(n.innerHTML='<img src="'+r+'"/>')},t=function(t,i,r,u){return function(){var f=L.DomUtil.create("div",i);if(L.Browser.touch)L.DomEvent.on(f,"click",L.DomEvent.stopPropagation);else{L.DomEvent.disableClickPropagation(f);L.DomEvent.on(f,"mousewheel",L.DomEvent.stopPropagation)}return n(f,t,r,u),f}},i=function(n,t){return function(){for(var i=L.DomUtil.create("div",t),r=0;r<n.colors.length;r++)i.innerHTML+='<div class="outline"><i style="background:'+n.colors[r]+'"><\/i><\/div><div class="info-label">'+n.labels[r]+"<\/div>";if(L.Browser.touch)L.DomEvent.on(i,"click",L.DomEvent.stopPropagation);else{L.DomEvent.disableClickPropagation(i);L.DomEvent.on(i,"mousewheel",L.DomEvent.stopPropagation)}return i}};return{getOnAddLegend:t,getOnAddArrayLegend:i,updateLegend:n}});n.module("leaflet-directive").factory("leafletMapDefaults",["$q","leafletHelpers",function(t,i){function e(){return{keyboard:!0,dragging:!0,worldCopyJump:!1,doubleClickZoom:!0,scrollWheelZoom:!0,tap:!0,touchZoom:!0,zoomControl:!0,zoomsliderControl:!1,zoomControlPosition:"topleft",attributionControl:!0,controls:{layers:{visible:!0,position:"topright",collapsed:!0}},crs:L.CRS.EPSG3857,tileLayer:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",tileLayerOptions:{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap<\/a> contributors'},path:{weight:10,opacity:1,color:"#0000ff"},center:{lat:0,lng:0,zoom:1}}}var r=i.isDefined,o=i.isObject,f=i.obtainEffectiveMapId,u={};return{reset:function(){u={}},getDefaults:function(n){var t=f(u,n);return u[t]},getMapCreationDefaults:function(n){var o=f(u,n),t=u[o],i={maxZoom:t.maxZoom,keyboard:t.keyboard,dragging:t.dragging,zoomControl:t.zoomControl,doubleClickZoom:t.doubleClickZoom,scrollWheelZoom:t.scrollWheelZoom,tap:t.tap,touchZoom:t.touchZoom,attributionControl:t.attributionControl,worldCopyJump:t.worldCopyJump,crs:t.crs},e;if(r(t.minZoom)&&(i.minZoom=t.minZoom),r(t.zoomAnimation)&&(i.zoomAnimation=t.zoomAnimation),r(t.fadeAnimation)&&(i.fadeAnimation=t.fadeAnimation),r(t.markerZoomAnimation)&&(i.markerZoomAnimation=t.markerZoomAnimation),t.map)for(e in t.map)i[e]=t.map[e];return i},setDefaults:function(t,i){var s=e(),h;return r(t)&&(s.doubleClickZoom=r(t.doubleClickZoom)?t.doubleClickZoom:s.doubleClickZoom,s.scrollWheelZoom=r(t.scrollWheelZoom)?t.scrollWheelZoom:s.doubleClickZoom,s.tap=r(t.tap)?t.tap:s.tap,s.touchZoom=r(t.touchZoom)?t.touchZoom:s.doubleClickZoom,s.zoomControl=r(t.zoomControl)?t.zoomControl:s.zoomControl,s.zoomsliderControl=r(t.zoomsliderControl)?t.zoomsliderControl:s.zoomsliderControl,s.attributionControl=r(t.attributionControl)?t.attributionControl:s.attributionControl,s.tileLayer=r(t.tileLayer)?t.tileLayer:s.tileLayer,s.zoomControlPosition=r(t.zoomControlPosition)?t.zoomControlPosition:s.zoomControlPosition,s.keyboard=r(t.keyboard)?t.keyboard:s.keyboard,s.dragging=r(t.dragging)?t.dragging:s.dragging,r(t.controls)&&n.extend(s.controls,t.controls),o(t.crs)?s.crs=t.crs:r(L.CRS[t.crs])&&(s.crs=L.CRS[t.crs]),r(t.center)&&n.copy(t.center,s.center),r(t.tileLayerOptions)&&n.copy(t.tileLayerOptions,s.tileLayerOptions),r(t.maxZoom)&&(s.maxZoom=t.maxZoom),r(t.minZoom)&&(s.minZoom=t.minZoom),r(t.zoomAnimation)&&(s.zoomAnimation=t.zoomAnimation),r(t.fadeAnimation)&&(s.fadeAnimation=t.fadeAnimation),r(t.markerZoomAnimation)&&(s.markerZoomAnimation=t.markerZoomAnimation),r(t.worldCopyJump)&&(s.worldCopyJump=t.worldCopyJump),r(t.map)&&(s.map=t.map),r(t.path)&&(s.path=t.path)),h=f(u,i),u[h]=s,s}}}]);n.module("leaflet-directive").service("leafletMarkersHelpers",["$rootScope","$timeout","leafletHelpers","$log","$compile","leafletGeoJsonHelpers",function(t,i,r,u,f,e){var o=r.isDefined,k=r.defaultTo,rt=r.MarkerClusterPlugin,ut=r.AwesomeMarkersPlugin,ft=r.MakiMarkersPlugin,et=r.ExtraMarkersPlugin,y=r.safeApply,a=r,s=r.isString,d=r.isNumber,l=r.isObject,h={},p=e,c=r.errorHeader,g=function(n){var t="";return["_icon","_latlng","_leaflet_id","_map","_shadow"].forEach(function(i){t+=i+": "+k(n[i],"undefined")+" \n"}),"[leafletMarker] : \n"+t},ot=function(n,t){var i=t?console:u;i.debug(g(n))},w=function(n){if(o(n)&&o(n.type)&&n.type==="awesomeMarker")return ut.isLoaded()||u.error(c+" The AwesomeMarkers Plugin is not loaded."),new L.AwesomeMarkers.icon(n);if(o(n)&&o(n.type)&&n.type==="makiMarker")return ft.isLoaded()||u.error(c+"The MakiMarkers Plugin is not loaded."),new L.MakiMarkers.icon(n);if(o(n)&&o(n.type)&&n.type==="extraMarker")return et.isLoaded()||u.error(c+"The ExtraMarkers Plugin is not loaded."),new L.ExtraMarkers.icon(n);if(o(n)&&o(n.type)&&n.type==="div")return new L.divIcon(n);if(o(n)&&o(n.type)&&n.type==="icon")return n.icon;return!o(n)||!o(n.iconUrl)?new L.Icon.Default({iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAGmklEQVRYw7VXeUyTZxjvNnfELFuyIzOabermMZEeQC/OclkO49CpOHXOLJl/CAURuYbQi3KLgEhbrhZ1aDwmaoGqKII6odATmH/scDFbdC7LvFqOCc+e95s2VG50X/LLm/f4/Z7neY/ne18aANCmAr5E/xZf1uDOkTcGcWR6hl9247tT5U7Y6SNvWsKT63P58qbfeLJG8M5qcgTknrvvrdDbsT7Ml+tv82X6vVxJE33aRmgSyYtcWVMqX97Yv2JvW39UhRE2HuyBL+t+gK1116ly06EeWFNlAmHxlQE0OMiV6mQCScusKRlhS3QLeVJdl1+23h5dY4FNB3thrbYboqptEFlphTC1hSpJnbRvxP4NWgsE5Jyz86QNNi/5qSUTGuFk1gu54tN9wuK2wc3o+Wc13RCmsoBwEqzGcZsxsvCSy/9wJKf7UWf1mEY8JWfewc67UUoDbDjQC+FqK4QqLVMGGR9d2wurKzqBk3nqIT/9zLxRRjgZ9bqQgub+DdoeCC03Q8j+0QhFhBHR/eP3U/zCln7Uu+hihJ1+bBNffLIvmkyP0gpBZWYXhKussK6mBz5HT6M1Nqpcp+mBCPXosYQfrekGvrjewd59/GvKCE7TbK/04/ZV5QZYVWmDwH1mF3xa2Q3ra3DBC5vBT1oP7PTj4C0+CcL8c7C2CtejqhuCnuIQHaKHzvcRfZpnylFfXsYJx3pNLwhKzRAwAhEqG0SpusBHfAKkxw3w4627MPhoCH798z7s0ZnBJ/MEJbZSbXPhER2ih7p2ok/zSj2cEJDd4CAe+5WYnBCgR2uruyEw6zRoW6/DWJ/OeAP8pd/BGtzOZKpG8oke0SX6GMmRk6GFlyAc59K32OTEinILRJRchah8HQwND8N435Z9Z0FY1EqtxUg+0SO6RJ/mmXz4VuS+DpxXC3gXmZwIL7dBSH4zKE50wESf8qwVgrP1EIlTO5JP9Igu0aexdh28F1lmAEGJGfh7jE6ElyM5Rw/FDcYJjWhbeiBYoYNIpc2FT/SILivp0F1ipDWk4BIEo2VuodEJUifhbiltnNBIXPUFCMpthtAyqws/BPlEF/VbaIxErdxPphsU7rcCp8DohC+GvBIPJS/tW2jtvTmmAeuNO8BNOYQeG8G/2OzCJ3q+soYB5i6NhMaKr17FSal7GIHheuV3uSCY8qYVuEm1cOzqdWr7ku/R0BDoTT+DT+ohCM6/CCvKLKO4RI+dXPeAuaMqksaKrZ7L3FE5FIFbkIceeOZ2OcHO6wIhTkNo0ffgjRGxEqogXHYUPHfWAC/lADpwGcLRY3aeK4/oRGCKYcZXPVoeX/kelVYY8dUGf8V5EBRbgJXT5QIPhP9ePJi428JKOiEYhYXFBqou2Guh+p/mEB1/RfMw6rY7cxcjTrneI1FrDyuzUSRm9miwEJx8E/gUmqlyvHGkneiwErR21F3tNOK5Tf0yXaT+O7DgCvALTUBXdM4YhC/IawPU+2PduqMvuaR6eoxSwUk75ggqsYJ7VicsnwGIkZBSXKOUww73WGXyqP+J2/b9c+gi1YAg/xpwck3gJuucNrh5JvDPvQr0WFXf0piyt8f8/WI0hV4pRxxkQZdJDfDJNOAmM0Ag8jyT6hz0WGXWuP94Yh2jcfjmXAGvHCMslRimDHYuHuDsy2QtHuIavznhbYURq5R57KpzBBRZKPJi8eQg48h4j8SDdowifdIrEVdU+gbO6QNvRRt4ZBthUaZhUnjlYObNagV3keoeru3rU7rcuceqU1mJBxy+BWZYlNEBH+0eH4vRiB+OYybU2hnblYlTvkHinM4m54YnxSyaZYSF6R3jwgP7udKLGIX6r/lbNa9N6y5MFynjWDtrHd75ZvTYAPO/6RgF0k76mQla3FGq7dO+cH8sKn0Vo7nDllwAhqwLPkxrHwWmHJOo+AKJ4rab5OgrM7rVu8eWb2Pu0Dh4eDgXoOfvp7Y7QeqknRmvcTBEyq9m/HQQSCSz6LHq3z0yzsNySRfMS253wl2KyRDbcZPcfJKjZmSEOjcxyi+Y8dUOtsIEH6R2wNykdqrkYJ0RV92H0W58pkfQk7cKevsLK10Py8SdMGfXNXATY+pPbyJR/ET6n9nIfztNtZYRV9XniQu9IA2vOVgy4ir7GCLVmmd+zjkH0eAF9Po6K61pmCXHxU5rHMYd1ftc3owjwRSVRzLjKvqZEty6cRUD7jGqiOdu5HG6MdHjNcNYGqfDm5YRzLBBCCDl/2bk8a8gdbqcfwECu62Fg/HrggAAAABJRU5ErkJggg==",shadowUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAYAAACoYAD2AAAC5ElEQVRYw+2YW4/TMBCF45S0S1luXZCABy5CgLQgwf//S4BYBLTdJLax0fFqmB07nnQfEGqkIydpVH85M+NLjPe++dcPc4Q8Qh4hj5D/AaQJx6H/4TMwB0PeBNwU7EGQAmAtsNfAzoZkgIa0ZgLMa4Aj6CxIAsjhjOCoL5z7Glg1JAOkaicgvQBXuncwJAWjksLtBTWZe04CnYRktUGdilALppZBOgHGZcBzL6OClABvMSVIzyBjazOgrvACf1ydC5mguqAVg6RhdkSWQFj2uxfaq/BrIZOLEWgZdALIDvcMcZLD8ZbLC9de4yR1sYMi4G20S4Q/PWeJYxTOZn5zJXANZHIxAd4JWhPIloTJZhzMQduM89WQ3MUVAE/RnhAXpTycqys3NZALOBbB7kFrgLesQl2h45Fcj8L1tTSohUwuxhy8H/Qg6K7gIs+3kkaigQCOcyEXCHN07wyQazhrmIulvKMQAwMcmLNqyCVyMAI+BuxSMeTk3OPikLY2J1uE+VHQk6ANrhds+tNARqBeaGc72cK550FP4WhXmFmcMGhTwAR1ifOe3EvPqIegFmF+C8gVy0OfAaWQPMR7gF1OQKqGoBjq90HPMP01BUjPOqGFksC4emE48tWQAH0YmvOgF3DST6xieJgHAWxPAHMuNhrImIdvoNOKNWIOcE+UXE0pYAnkX6uhWsgVXDxHdTfCmrEEmMB2zMFimLVOtiiajxiGWrbU52EeCdyOwPEQD8LqyPH9Ti2kgYMf4OhSKB7qYILbBv3CuVTJ11Y80oaseiMWOONc/Y7kJYe0xL2f0BaiFTxknHO5HaMGMublKwxFGzYdWsBF174H/QDknhTHmHHN39iWFnkZx8lPyM8WHfYELmlLKtgWNmFNzQcC1b47gJ4hL19i7o65dhH0Negbca8vONZoP7doIeOC9zXm8RjuL0Gf4d4OYaU5ljo3GYiqzrWQHfJxA6ALhDpVKv9qYeZA8eM3EhfPSCmpuD0AAAAASUVORK5CYII=",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}):new L.Icon(n)},st=function(n){o(h[n])&&h.splice(n,1)},ht=function(){h={}},b=function(n,t,i){var r,u;if(n.closePopup(),o(i)&&o(i.overlays))for(r in i.overlays)if((i.overlays[r]instanceof L.LayerGroup||i.overlays[r]instanceof L.FeatureGroup)&&i.overlays[r].hasLayer(n)){i.overlays[r].removeLayer(n);return}if(o(h))for(u in h)h[u].hasLayer(n)&&h[u].removeLayer(n);t.hasLayer(n)&&t.removeLayer(n)},ct=function(n,t){var i=n._popup._container.offsetHeight,r=new L.Point(n._popup._containerLeft,-i-n._popup._containerBottom),u=t.layerPointToContainerPoint(r);u!==null&&n._popup._adjustPan()},lt=function(n,t){f(n._popup._contentNode)(t)},nt=function(n,t,r){n._popup._contentNode.innerText.length<1&&i(function(){nt(n,t,r)});var u=n._popup._contentNode.offsetWidth;return n._popup._updateLayout(),n._popup._updatePosition(),n._popup.options.autoPan&&ct(n,r),u},tt=function(i,r,f){var e=n.isFunction(r.getMessageScope)?r.getMessageScope():t,s=o(r.compileMessage)?r.compileMessage:!0;if(s){if(!o(i._popup)||!o(i._popup._contentNode))return u.error(c+"Popup is invalid or does not have any content."),!1;lt(i,e);nt(i,r,f)}},v=function(i,r){var u=n.isFunction(r.getMessageScope)?r.getMessageScope():t,e=n.isFunction(r.getLabelScope)?r.getLabelScope():u,s=o(r.compileMessage)?r.compileMessage:!0;a.LabelPlugin.isLoaded()&&o(r.label)&&(o(r.label.options)&&r.label.options.noHide===!0&&i.showLabel(),s&&o(i.label)&&f(i.label._container)(e))},it=function(t,i,r,f,e,h,y){var it,g,tt,nt,k,rt;if(o(i)){if(!p.validateCoords(t)){u.warn("There are problems with lat-lng data, please verify your marker model");b(r,y,h);return}if(it=t===i,o(t.iconAngle)&&i.iconAngle!==t.iconAngle&&r.setIconAngle(t.iconAngle),s(t.layer)||s(i.layer)&&(o(h.overlays[i.layer])&&h.overlays[i.layer].hasLayer(r)&&(h.overlays[i.layer].removeLayer(r),r.closePopup()),y.hasLayer(r)||y.addLayer(r)),(d(t.opacity)||d(parseFloat(t.opacity)))&&t.opacity!==i.opacity&&r.setOpacity(t.opacity),s(t.layer)&&i.layer!==t.layer){if(s(i.layer)&&o(h.overlays[i.layer])&&h.overlays[i.layer].hasLayer(r)&&h.overlays[i.layer].removeLayer(r),r.closePopup(),y.hasLayer(r)&&y.removeLayer(r),!o(h.overlays[t.layer])){u.error(c+"You must use a name of an existing layer");return}if(g=h.overlays[t.layer],!(g instanceof L.LayerGroup||g instanceof L.FeatureGroup)){u.error(c+'A marker can only be added to a layer of type "group" or "featureGroup"');return}g.addLayer(r);y.hasLayer(r)&&t.focus===!0&&r.openPopup()}t.draggable!==!0&&i.draggable===!0&&o(r.dragging)&&r.dragging.disable();t.draggable===!0&&i.draggable!==!0&&(r.dragging?r.dragging.enable():L.Handler.MarkerDrag&&(r.dragging=new L.Handler.MarkerDrag(r),r.options.draggable=!0,r.dragging.enable()));l(t.icon)||l(i.icon)&&(r.setIcon(w()),r.closePopup(),r.unbindPopup(),s(t.message)&&r.bindPopup(t.message,t.popupOptions));l(t.icon)&&l(i.icon)&&!n.equals(t.icon,i.icon)&&(tt=!1,r.dragging&&(tt=r.dragging.enabled()),r.setIcon(w(t.icon)),tt&&r.dragging.enable(),r.closePopup(),r.unbindPopup(),s(t.message)&&r.bindPopup(t.message,t.popupOptions));!s(t.message)&&s(i.message)&&(r.closePopup(),r.unbindPopup());a.LabelPlugin.isLoaded()&&(o(t.label)&&o(t.label.message)?"label"in i&&"message"in i.label&&!n.equals(t.label.message,i.label.message)?r.updateLabelContent(t.label.message):n.isFunction(r.getLabel)&&(!n.isFunction(r.getLabel)||o(r.getLabel()))?v(r,t):(r.bindLabel(t.label.message,t.label.options),v(r,t)):"label"in t&&!("message"in t.label)||n.isFunction(r.unbindLabel)&&r.unbindLabel());s(t.message)&&!s(i.message)&&r.bindPopup(t.message,t.popupOptions);s(t.message)&&s(i.message)&&t.message!==i.message&&r.setPopupContent(t.message);nt=!1;t.focus!==!0&&i.focus===!0&&(r.closePopup(),nt=!0);(t.focus===!0&&(!o(i.focus)||i.focus===!1)||it&&t.focus===!0)&&(r.openPopup(),nt=!0);i.zIndexOffset!==t.zIndexOffset&&r.setZIndexOffset(t.zIndexOffset);k=r.getLatLng();rt=s(t.layer)&&a.MarkerClusterPlugin.is(h.overlays[t.layer]);rt?nt?(t.lat!==i.lat||t.lng!==i.lng)&&(h.overlays[t.layer].removeLayer(r),r.setLatLng([t.lat,t.lng]),h.overlays[t.layer].addLayer(r)):k.lat!==t.lat||k.lng!==t.lng?(h.overlays[t.layer].removeLayer(r),r.setLatLng([t.lat,t.lng]),h.overlays[t.layer].addLayer(r)):t.lat!==i.lat||t.lng!==i.lng?(h.overlays[t.layer].removeLayer(r),r.setLatLng([t.lat,t.lng]),h.overlays[t.layer].addLayer(r)):l(t.icon)&&l(i.icon)&&!n.equals(t.icon,i.icon)&&(h.overlays[t.layer].removeLayer(r),h.overlays[t.layer].addLayer(r)):(k.lat!==t.lat||k.lng!==t.lng)&&r.setLatLng([t.lat,t.lng])}};return{resetMarkerGroup:st,resetMarkerGroups:ht,deleteMarker:b,manageOpenPopup:tt,manageOpenLabel:v,createMarker:function(n){var r,i,t,f;if(!o(n)||!p.validateCoords(n)){u.error(c+"The marker definition is not valid.");return}if(r=p.getCoords(n),!o(r)){u.error(c+"Unable to get coordinates from markerData.");return}i={icon:w(n.icon),title:o(n.title)?n.title:"",draggable:o(n.draggable)?n.draggable:!1,clickable:o(n.clickable)?n.clickable:!0,riseOnHover:o(n.riseOnHover)?n.riseOnHover:!1,zIndexOffset:o(n.zIndexOffset)?n.zIndexOffset:0,iconAngle:o(n.iconAngle)?n.iconAngle:0};for(t in n)n.hasOwnProperty(t)&&!i.hasOwnProperty(t)&&(i[t]=n[t]);return f=new L.marker(r,i),s(n.message)||f.unbindPopup(),f},addMarkerToGroup:function(n,t,i,r){if(!s(t)){u.error(c+"The marker group you have specified is invalid.");return}if(!rt.isLoaded()){u.error(c+"The MarkerCluster plugin is not loaded.");return}o(h[t])||(h[t]=new L.MarkerClusterGroup(i),r.addLayer(h[t]));h[t].addLayer(n)},listenMarkerEvents:function(n,t,i,r,u){n.on("popupopen",function(){y(i,function(){(o(n._popup)||o(n._popup._contentNode))&&(t.focus=!0,tt(n,t,u))})});n.on("popupclose",function(){y(i,function(){t.focus=!1})});n.on("add",function(){y(i,function(){"label"in t&&v(n,t)})})},updateMarker:it,addMarkerWatcher:function(n,t,i,r,u,f){var s=a.getObjectArrayPath("markers."+t),e;f=k(f,!0);e=i.$watch(s,function(f,s){if(!o(f)){b(n,u,r);e();return}it(f,s,n,t,i,r,u)},f)},string:g,log:ot}}]);n.module("leaflet-directive").factory("leafletPathsHelpers",["$rootScope","$log","leafletHelpers",function(n,t,i){function s(n){return n.filter(function(n){return e(n)}).map(function(n){return c(n)})}function c(n){return f(n)?new L.LatLng(n[0],n[1]):new L.LatLng(n.lat,n.lng)}function v(n){return n.map(function(n){return s(n)})}function y(n,t){for(var i,u={},f=0;f<o.length;f++)i=o[f],r(n[i])?u[i]=n[i]:r(t.path[i])&&(u[i]=t.path[i]);return u}var r=i.isDefined,f=i.isArray,a=i.isNumber,e=i.isValidPoint,o=["stroke","weight","color","opacity","fill","fillColor","fillOpacity","dashArray","lineCap","lineJoin","clickable","pointerEvents","className","smoothFactor","noClip"],u=function(n,t){for(var i,f={},u=0;u<o.length;u++)i=o[u],r(t[i])&&(f[i]=t[i]);n.setStyle(t)},h=function(n){var t,i;if(!f(n))return!1;for(t=0;t<n.length;t++)if(i=n[t],!e(i))return!1;return!0},l={polyline:{isValid:function(n){var t=n.latlngs;return h(t)},createPath:function(n){return new L.Polyline([],n)},setPath:function(n,t){n.setLatLngs(s(t.latlngs));u(n,t);return}},multiPolyline:{isValid:function(n){var t=n.latlngs,i,r;if(!f(t))return!1;for(i in t)if(r=t[i],!h(r))return!1;return!0},createPath:function(n){return new L.multiPolyline([[[0,0],[1,1]]],n)},setPath:function(n,t){n.setLatLngs(v(t.latlngs));u(n,t);return}},polygon:{isValid:function(n){var t=n.latlngs;return h(t)},createPath:function(n){return new L.Polygon([],n)},setPath:function(n,t){n.setLatLngs(s(t.latlngs));u(n,t);return}},multiPolygon:{isValid:function(n){var t=n.latlngs,i,r;if(!f(t))return!1;for(i in t)if(r=t[i],!h(r))return!1;return!0},createPath:function(n){return new L.MultiPolygon([[[0,0],[1,1],[0,1]]],n)},setPath:function(n,t){n.setLatLngs(v(t.latlngs));u(n,t);return}},rectangle:{isValid:function(n){var t=n.latlngs,i,r;if(!f(t)||t.length!==2)return!1;for(i in t)if(r=t[i],!e(r))return!1;return!0},createPath:function(n){return new L.Rectangle([[0,0],[1,1]],n)},setPath:function(n,t){n.setBounds(new L.LatLngBounds(s(t.latlngs)));u(n,t)}},circle:{isValid:function(n){var t=n.latlngs;return e(t)&&a(n.radius)},createPath:function(n){return new L.Circle([0,0],1,n)},setPath:function(n,t){n.setLatLng(c(t.latlngs));r(t.radius)&&n.setRadius(t.radius);u(n,t)}},circleMarker:{isValid:function(n){var t=n.latlngs;return e(t)&&a(n.radius)},createPath:function(n){return new L.CircleMarker([0,0],n)},setPath:function(n,t){n.setLatLng(c(t.latlngs));r(t.radius)&&n.setRadius(t.radius);u(n,t)}}},p=function(n){var t={};return n.latlngs&&(t.latlngs=n.latlngs),n.radius&&(t.radius=n.radius),t};return{setPathOptions:function(n,t,i){r(t)||(t="polyline");l[t].setPath(n,i)},createPath:function(n,i,u){r(i.type)||(i.type="polyline");var f=y(i,u),e=p(i);if(!l[i.type].isValid(e)){t.error("[AngularJS - Leaflet] Invalid data passed to the "+i.type+" path");return}return l[i.type].createPath(f)}}}]);n.module("leaflet-directive").service("leafletWatchHelpers",function(){var n=function(n,t,i,r,u){var f=n[t](i,function(n,t){u(n,t);r.doWatch||f()},r.isDeep);return f},t=function(t,i,r,u){return n(t,"$watch",i,r,u)},i=function(t,i,r,u){return n(t,"$watchCollection",i,r,u)};return{maybeWatch:t,maybeWatchCollection:i}});n.module("leaflet-directive").directive("bounds",["$log","$timeout","leafletHelpers","leafletBoundsHelpers",function(t,i,r,u){return{restrict:"A",scope:!1,replace:!1,require:["leaflet","center"],link:function(f,e,o,s){var c=r.isDefined,l=u.createLeafletBounds,h=s[0].getLeafletScope(),a=s[0],v=function(n){return n._southWest.lat===0&&n._southWest.lng===0&&n._northEast.lat===0&&n._northEast.lng===0};a.getMap().then(function(r){h.$on("boundsChanged",function(t){var u=t.currentScope,i=r.getBounds(),f;v(i)||u.settingBoundsFromScope||(f={northEast:{lat:i._northEast.lat,lng:i._northEast.lng},southWest:{lat:i._southWest.lat,lng:i._southWest.lng},options:i.options},n.equals(u.bounds,f)||(u.bounds=f))});h.$watch("bounds",function(n){if(!c(n)){t.error("[AngularJS - Leaflet] Invalid bounds");return}var u=l(n);u&&!r.getBounds().equals(u)&&(f.settingBoundsFromScope=!0,r.fitBounds(u,n.options),i(function(){f.settingBoundsFromScope=!1}))},!0)})}}}]);n.module("leaflet-directive").directive("center",["$log","$q","$location","$timeout","leafletMapDefaults","leafletHelpers","leafletBoundsHelpers","leafletEvents",function(t,i,r,u,f,e,o,s){var h=e.isDefined,y=e.isNumber,l=e.isSameCenterOnMap,a=e.safeApply,p=e.isValidCenter,w=o.isValidBounds,b=e.isUndefinedOrEmpty,c=e.errorHeader,k=function(n,t){return h(n)&&w(n)&&b(t)},v;return{restrict:"A",scope:!1,replace:!1,require:"leaflet",controller:function(){v=i.defer();this.getCenter=function(){return v.promise}},link:function(i,e,w,b){var d=b.getLeafletScope(),g=d.center;b.getMap().then(function(e){var b=f.getDefaults(w.id),nt,it,tt;if(w.center.search("-")!==-1){t.error(c+' The "center" variable can\'t use a "-" on his key name: "'+w.center+'".');e.setView([b.center.lat,b.center.lng],b.center.zoom);return}if(k(d.bounds,g))e.fitBounds(o.createLeafletBounds(d.bounds),d.bounds.options),g=e.getCenter(),a(d,function(t){n.extend(t.center,{lat:e.getCenter().lat,lng:e.getCenter().lng,zoom:e.getZoom(),autoDiscover:!1})}),a(d,function(n){var t=e.getBounds();n.bounds={northEast:{lat:t._northEast.lat,lng:t._northEast.lng},southWest:{lat:t._southWest.lat,lng:t._southWest.lng}}});else if(h(g))h(g.lat)&&h(g.lng)||h(g.autoDiscover)||n.copy(b.center,g);else{t.error(c+' The "center" property is not defined in the main scope');e.setView([b.center.lat,b.center.lng],b.center.zoom);return}w.urlHashCenter==="yes"&&(tt=function(){var t=r.search(),i,n;return h(t.c)&&(n=t.c.split(":"),n.length===3&&(i={lat:parseFloat(n[0]),lng:parseFloat(n[1]),zoom:parseInt(n[2],10)})),i},nt=tt(),d.$on("$locationChangeSuccess",function(t){var r=t.currentScope,i=tt();h(i)&&!l(i,e)&&n.extend(r.center,{lat:i.lat,lng:i.lng,zoom:i.zoom})}));d.$watch("center",function(i){if(h(nt)&&(n.copy(nt,i),nt=undefined),!p(i)&&i.autoDiscover!==!0){t.warn(c+" invalid 'center'");return}if(i.autoDiscover===!0){y(i.zoom)||e.setView([b.center.lat,b.center.lng],b.center.zoom);y(i.zoom)&&i.zoom>b.center.zoom?e.locate({setView:!0,maxZoom:i.zoom}):h(b.maxZoom)?e.locate({setView:!0,maxZoom:b.maxZoom}):e.locate({setView:!0});return}it&&l(i,e)||(d.settingCenterFromScope=!0,e.setView([i.lat,i.lng],i.zoom),s.notifyCenterChangedToBounds(d,e),u(function(){d.settingCenterFromScope=!1}))},!0);e.whenReady(function(){it=!0});e.on("moveend",function(){(v.resolve(),s.notifyCenterUrlHashChanged(d,e,w,r.search()),l(g,e)||i.settingCenterFromScope)||a(d,function(t){d.settingCenterFromScope||n.extend(t.center,{lat:e.getCenter().lat,lng:e.getCenter().lng,zoom:e.getZoom(),autoDiscover:!1});s.notifyCenterChangedToBounds(d,e)})});if(g.autoDiscover===!0)e.on("locationerror",function(){t.warn(c+" The Geolocation API is unauthorized on this page.");p(g)?(e.setView([g.lat,g.lng],g.zoom),s.notifyCenterChangedToBounds(d,e)):(e.setView([b.center.lat,b.center.lng],b.center.zoom),s.notifyCenterChangedToBounds(d,e))})})}}}]);n.module("leaflet-directive").directive("controls",["$log","leafletHelpers","leafletControlHelpers",function(n,t,i){return{restrict:"A",scope:!1,replace:!1,require:"?^leaflet",link:function(r,u,f,e){if(e){var h=i.createControl,c=i.isValidControlType,l=e.getLeafletScope(),s=t.isDefined,o={},a=t.errorHeader+" [Controls] ";e.getMap().then(function(t){l.$watchCollection("controls",function(i){var u,r,e,f;for(u in o)s(i[u])||(t.hasControl(o[u])&&t.removeControl(o[u]),delete o[u]);for(r in i){if(f=s(i[r].type)?i[r].type:r,!c(f)){n.error(a+" Invalid control type: "+f+".");return}e=f!=="custom"?h(f,i[r]):i[r];t.addControl(e);o[r]=e}})})}}}}]);n.module("leaflet-directive").directive("decorations",["$log","leafletHelpers",function(t,i){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(r,u,f,e){function l(n){return o(n)&&o(n.coordinates)&&(c.isLoaded()||t.error("[AngularJS - Leaflet] The PolylineDecorator Plugin is not loaded.")),L.polylineDecorator(n.coordinates)}function a(n,t){if(o(n)&&o(t)&&o(t.coordinates)&&o(t.patterns))return n.setPaths(t.coordinates),n.setPatterns(t.patterns),n}var h=e.getLeafletScope(),c=i.PolylineDecoratorPlugin,o=i.isDefined,s={};e.getMap().then(function(t){h.$watch("decorations",function(i){var r,f,e,u;for(r in s)o(i[r])&&n.equals(i[r],s)||(t.removeLayer(s[r]),delete s[r]);for(f in i)e=i[f],u=l(e),o(u)&&(s[f]=u,t.addLayer(u),a(u,e))},!0)})}}}]);n.module("leaflet-directive").directive("eventBroadcast",["$log","$rootScope","leafletHelpers","leafletEvents","leafletIterators",function(n,t,i,r,u){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(t,f,e,o){var h=i.isObject,a=i.isDefined,c=o.getLeafletScope(),s=c.eventBroadcast,l=r.getAvailableMapEvents(),v=r.addEvents;o.getMap().then(function(t){var i=[],r="broadcast";a(s.map)?h(s.map)?(s.map.logic!=="emit"&&s.map.logic!=="broadcast"?n.warn("[AngularJS - Leaflet] Available event propagation logic are: 'emit' or 'broadcast'."):r=s.map.logic,h(s.map.enable)&&s.map.enable.length>=0?u.each(s.map.enable,function(n){i.indexOf(n)===-1&&l.indexOf(n)!==-1&&i.push(n)}):n.warn("[AngularJS - Leaflet] event-broadcast.map.enable must be an object check your model.")):n.warn("[AngularJS - Leaflet] event-broadcast.map must be an object check your model."):i=l;v(t,i,"eventName",c,r)})}}}]);n.module("leaflet-directive").directive("geojson",["$log","$rootScope","leafletData","leafletHelpers","leafletWatchHelpers","leafletDirectiveControlsHelpers","leafletIterators","leafletGeoJsonEvents",function(t,i,r,u,f,e,o,s){var l=f.maybeWatch,a=u.watchOptions,v=e.extend,h=u,c=o;return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(t,i,f,e){var y=u.isDefined,p=e.getLeafletScope(),o={},w=!1;e.getMap().then(function(t){var d=p.geojsonWatchOptions||a,g=function(t,i){return n.isFunction(t.onEachFeature)?t.onEachFeature:function(n,r){u.LabelPlugin.isLoaded()&&y(n.properties.description)&&r.bindLabel(n.properties.description);s.bindEvents(r,null,n,p,i,{resetStyleOnMouseout:t.resetStyleOnMouseout,mapId:f.id})}},i=h.isDefined(f.geojsonNested)&&h.isTruthy(f.geojsonNested),e=function(){if(o){var n=function(n){y(n)&&t.hasLayer(n)&&t.removeLayer(n)};if(i){c.each(o,function(t){n(t)});return}n(o)}},b=function(i,u){var e=n.copy(i),c,s;y(e)&&y(e.data)&&(c=g(e,u),y(e.options)||(e.options={style:e.style,filter:e.filter,onEachFeature:c,pointToLayer:e.pointToLayer}),s=L.geoJson(e.data,e.options),u&&h.isString(u)?o[u]=s:o=s,s.addTo(t),w||(w=!0,r.setGeoJSON(o,f.id)))},k=function(n){if(e(),i){if(!n||!Object.keys(n).length)return;c.each(n,function(n,t){b(n,t)});return}b(n)};v(f.id,"geojson",k,e);l(p,"geojson",d,function(n){k(n)})})}}}]);n.module("leaflet-directive").directive("opacityControl",["$log","leafletData","leafletHelpers",function(t,i,r){return{scope:!1,restrict:"A",require:"^layercontrol",transclude:!1,replace:!1,link:function(u,f){var o=r.isDefined,e;u.$watch(function(){return u.layerProperties[u.layer.name]},function(r){if(o(r))if(e=r.opacity,o(f.ionRangeSlider)){var s='<input type="text" class="lf-opacity-control" data-key="'+u.layer.index+'" value="'+e+'"/>';s=n.element(s).appendTo(f);s.ionRangeSlider({min:0,step:1,max:100,prettify:!1,hasGrid:!1,hideMinMax:!1});u.$watch(function(){return u.layerProperties[u.layer.name].opacityControl},function(){u.layer.visible&&r.opacityControl?(f.show(),s.ionRangeSlider("update",{from:e,onChange:function(n){i.getMap().then(function(t){i.getLayers().then(function(i){var o=n.input.data().key,f;for(var e in u.layers.overlays)if(u.layers.overlays[e].index===o){f=i.overlays[e];break}t.hasLayer(f)&&(r.opacity=n.input.val(),f.setOpacity&&f.setOpacity(n.input.val()/100),f.getLayers&&f.eachLayer&&f.eachLayer(function(t){t.setOpacity&&t.setOpacity(n.input.val()/100)}))})})}})):f.hide()})}else t.warn("[AngularJS - Leaflet] Ion Slide Range Plugin is not loaded")})}}}]).directive("layercontrol",["$filter","$log","leafletData","leafletHelpers",function(t,i,r,u){return{restrict:"E",scope:{setIcons:"="},replace:!0,transclude:!1,require:"^leaflet",controller:["$scope","$element","$sce",function(t,f,e){var s,h,o;if(i.debug("[Angular Directive - Layers] layers",t,f),s=u.safeApply,h=u.isDefined,n.extend(t,{baselayer:"",layerProperties:{},icons:{uncheck:"fa fa-square-o",check:"fa fa-check-square-o",radio:"fa fa-dot-circle-o",unradio:"fa fa-circle-o",up:"fa fa-angle-up",down:"fa fa-angle-down",open:"fa fa-angle-double-down",close:"fa fa-angle-double-up",toggleLegend:"fa fa-pencil-square-o"},changeBaseLayer:function(n,i){u.safeApply(t,function(i){i.baselayer=n;r.getMap().then(function(u){r.getLayers().then(function(r){if(!u.hasLayer(r.baselayers[n])){for(var f in i.layers.baselayers)i.layers.baselayers[f].icon=i.icons.unradio,u.hasLayer(r.baselayers[f])&&u.removeLayer(r.baselayers[f]);u.addLayer(r.baselayers[n]);i.layers.baselayers[n].icon=t.icons.radio}})})});i.preventDefault()},moveLayer:function(n,i,r){var e=Object.keys(t.layers.baselayers).length,u,f;if(i>=1+e&&i<=t.overlaysArray.length+e){for(f in t.layers.overlays)if(t.layers.overlays[f].index===i){u=t.layers.overlays[f];break}u&&s(t,function(){u.index=n.index;n.index=i})}r.stopPropagation();r.preventDefault()},initIndex:function(n,i){var r=Object.keys(t.layers.baselayers).length;n.index=h(n.index)?n.index:i+r+1},toggleOpacity:function(i,r){if(r.visible){var u=n.element(i.currentTarget);u.toggleClass(t.icons.close+" "+t.icons.open);u=u.parents(".lf-row").find(".lf-opacity");t.layerProperties[r.name].opacityControl=!t.layerProperties[r.name].opacityControl}i.stopPropagation();i.preventDefault()},toggleLegend:function(n){t.layerProperties[n.name].showLegend=!t.layerProperties[n.name].showLegend},showLegend:function(n){return n.legend&&t.layerProperties[n.name].showLegend},unsafeHTML:function(n){return e.trustAsHtml(n)}}),o=f.get(0),L.Browser.touch)L.DomEvent.on(o,"click",L.DomEvent.stopPropagation);else{L.DomEvent.disableClickPropagation(o);L.DomEvent.on(o,"mousewheel",L.DomEvent.stopPropagation)}}],template:'<div class="angular-leaflet-control-layers" ng-show="overlaysArray.length"><div class="lf-baselayers"><div class="lf-row" ng-repeat="(key, layer) in layers.baselayers"><label class="lf-icon-bl" ng-click="changeBaseLayer(key, $event)"><input class="leaflet-control-layers-selector" type="radio" name="lf-radio" ng-show="false" ng-checked="baselayer === key" ng-value="key" /> <i class="lf-icon lf-icon-radio" ng-class="layer.icon"><\/i><div class="lf-text">{{layer.name}}<\/div><\/label><\/div><\/div><div class="lf-overlays"><div class="lf-container"><div class="lf-row" ng-repeat="layer in overlaysArray | orderBy:\'index\':order" ng-init="initIndex(layer, $index)"><label class="lf-icon-ol"><input class="lf-control-layers-selector" type="checkbox" ng-show="false" ng-model="layer.visible"/> <i class="lf-icon lf-icon-check" ng-class="layer.icon"><\/i><div class="lf-text">{{layer.name}}<\/div><\/label><div class="lf-icons"><i class="lf-icon lf-up" ng-class="icons.up" ng-click="moveLayer(layer, layer.index - orderNumber, $event)"><\/i> <i class="lf-icon lf-down" ng-class="icons.down" ng-click="moveLayer(layer, layer.index + orderNumber, $event)"><\/i> <i class="lf-icon lf-toggle-legend" ng-class="icons.toggleLegend" ng-if="layer.legend" ng-click="toggleLegend(layer)"><\/i> <i class="lf-icon lf-open" ng-class="layer.opacityControl? icons.close:icons.open" ng-click="toggleOpacity($event, layer)"><\/i><\/div><div class="lf-legend" ng-if="showLegend(layer)" ng-bind-html="unsafeHTML(layer.legend)"><\/div><div class="lf-opacity" opacity-control><\/div><\/div><\/div><\/div><\/div>',link:function(t,i,f,e){var o=u.isDefined,s=e.getLeafletScope(),h=s.layers;f.order=o(f.order)&&(f.order==="normal"||f.order==="reverse")?f.order:"normal";t.order=f.order==="normal";t.orderNumber=f.order==="normal"?-1:1;t.layers=h;e.getMap().then(function(n){s.$watch("layers.baselayers",function(i){r.getLayers().then(function(r){for(var u in i)i[u].icon=n.hasLayer(r.baselayers[u])?t.icons.radio:t.icons.unradio})});s.$watch("layers.overlays",function(n){var i=[];r.getLayers().then(function(r){for(var u in n)n[u].icon=t.icons[n[u].visible?"check":"uncheck"],i.push(n[u]),o(t.layerProperties[n[u].name])||(t.layerProperties[n[u].name]={opacity:o(n[u].layerOptions.opacity)?n[u].layerOptions.opacity*100:100,opacityControl:!1,showLegend:!0}),o(n[u].index)&&r.overlays[u].setZIndex&&r.overlays[u].setZIndex(n[u].index)});t.overlaysArray=i},!0)});t.$watch("setIcons",function(i){n.extend(t.icons,i)})}}}]);n.module("leaflet-directive").directive("layers",["$log","$q","leafletData","leafletHelpers","leafletLayerHelpers","leafletControlHelpers",function(t,i,r,u,f,e){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",controller:["$scope",function(n){n._leafletLayers=i.defer();this.getLayers=function(){return n._leafletLayers.promise}}],link:function(t,i,o,s){var l=u.isDefined,h={},p=s.getLeafletScope(),c=p.layers,v=f.createLayer,y=e.updateLayersControl,a=!1;s.getMap().then(function(i){var f,e,u,s,w;t._leafletLayers.resolve(h);r.setLayers(h,o.id);h.baselayers={};h.overlays={};f=o.id;e=!1;for(u in c.baselayers){if(s=v(c.baselayers[u]),!l(s)){delete c.baselayers[u];continue}h.baselayers[u]=s;c.baselayers[u].top===!0&&(i.addLayer(h.baselayers[u]),e=!0)}!e&&Object.keys(h.baselayers).length>0&&i.addLayer(h.baselayers[Object.keys(c.baselayers)[0]]);for(u in c.overlays){if(c.overlays[u].type==="cartodb",w=v(c.overlays[u]),!l(w)){delete c.overlays[u];continue}h.overlays[u]=w;c.overlays[u].visible===!0&&i.addLayer(h.overlays[u])}p.$watch("layers.baselayers",function(t,r){var e,u,o,s,p;if(n.equals(t,r))return a=y(i,f,a,t,c.overlays,h),!0;for(e in h.baselayers)(!l(t[e])||t[e].doRefresh)&&(i.hasLayer(h.baselayers[e])&&i.removeLayer(h.baselayers[e]),delete h.baselayers[e],t[e]&&t[e].doRefresh&&(t[e].doRefresh=!1));for(u in t)l(h.baselayers[u])?t[u].top!==!0||i.hasLayer(h.baselayers[u])?t[u].top===!1&&i.hasLayer(h.baselayers[u])&&i.removeLayer(h.baselayers[u]):i.addLayer(h.baselayers[u]):(o=v(t[u]),l(o)&&(h.baselayers[u]=o,t[u].top===!0&&i.addLayer(h.baselayers[u])));s=!1;for(p in h.baselayers)if(i.hasLayer(h.baselayers[p])){s=!0;break}!s&&Object.keys(h.baselayers).length>0&&i.addLayer(h.baselayers[Object.keys(h.baselayers)[0]]);a=y(i,f,a,t,c.overlays,h)},!0);p.$watch("layers.overlays",function(t,r){var e,u,o;if(n.equals(t,r))return a=y(i,f,a,c.baselayers,t,h),!0;for(e in h.overlays)(!l(t[e])||t[e].doRefresh)&&(i.hasLayer(h.overlays[e])&&i.removeLayer(h.overlays[e]),delete h.overlays[e],t[e]&&t[e].doRefresh&&(t[e].doRefresh=!1));for(u in t){if(!l(h.overlays[u])){if(o=v(t[u]),!l(o))continue;h.overlays[u]=o;t[u].visible===!0&&i.addLayer(h.overlays[u])}t[u].visible&&!i.hasLayer(h.overlays[u])?i.addLayer(h.overlays[u]):t[u].visible===!1&&i.hasLayer(h.overlays[u])&&i.removeLayer(h.overlays[u]);t[u].visible&&i._loaded&&t[u].data&&t[u].type==="heatmap"&&(h.overlays[u].setData(t[u].data),h.overlays[u].update())}a=y(i,f,a,c.baselayers,t,h)},!0)})}}}]);n.module("leaflet-directive").directive("legend",["$log","$http","leafletHelpers","leafletLegendHelpers",function(n,t,i,r){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(u,f,e,o){var p=i.isArray,h=i.isDefined,w=i.isFunction,l=o.getLeafletScope(),a=l.legend,v,y,s,c;l.$watch("legend",function(n){h(n)&&(v=n.legendClass?n.legendClass:"legend",y=n.position||"bottomright",c=n.type||"arcgis")},!0);o.getMap().then(function(i){l.$watch("legend",function(t){if(!h(t)){h(s)&&(s.removeFrom(i),s=null);return}if(!h(t.url)&&c==="arcgis"&&(!p(t.colors)||!p(t.labels)||t.colors.length!==t.labels.length)){n.warn("[AngularJS - Leaflet] legend.colors and legend.labels must be set.");return}if(h(t.url)){n.info("[AngularJS - Leaflet] loading legend service.");return}h(s)&&(s.removeFrom(i),s=null);s=L.control({position:y});c==="arcgis"&&(s.onAdd=r.getOnAddArrayLegend(t,v));s.addTo(i)});l.$watch("legend.url",function(u){h(u)&&t.get(u).success(function(n){h(s)?r.updateLegend(s.getContainer(),n,c,u):(s=L.control({position:y}),s.onAdd=r.getOnAddLegend(n,v,c,u),s.addTo(i));h(a.loadedData)&&w(a.loadedData)&&a.loadedData()}).error(function(){n.warn("[AngularJS - Leaflet] legend.url not loaded.")})})})}}}]);n.module("leaflet-directive").directive("markers",["$log","$rootScope","$q","leafletData","leafletHelpers","leafletMapDefaults","leafletMarkersHelpers","leafletMarkerEvents","leafletIterators","leafletWatchHelpers","leafletDirectiveControlsHelpers",function(t,i,r,u,f,e,o,s,h,c,l){var a=f.isDefined,v=f.errorHeader,y=f,p=f.isString,nt=o.addMarkerWatcher,tt=o.updateMarker,it=o.listenMarkerEvents,rt=o.addMarkerToGroup,ut=o.createMarker,ft=o.deleteMarker,w=h,et=f.watchOptions,ot=c.maybeWatch,st=l.extend,ht=function(n,t,i){if(Object.keys(n).length)return i&&p(i)?!n[i]||!Object.keys(n[i]).length?void 0:n[i][t]:n[t]},ct=function(n,t,i,r){return r&&p(r)?(a(t[r])||(t[r]={}),t[r][i]=n):t[i]=n,n},lt=function(n,i,r,u,f,e){if(!p(n))return t.error(v+" A layername must be a string"),!1;if(!a(i))return t.error(v+" You must add layers to the directive if the markers are going to use this functionality."),!1;if(!a(i.overlays)||!a(i.overlays[n]))return t.error(v+' A marker can only be added to a layer of type "group"'),!1;var o=i.overlays[n];return(o instanceof L.LayerGroup||o instanceof L.FeatureGroup)?(o.addLayer(u),!f&&e.hasLayer(u)&&r.focus===!0&&u.openPopup(),!0):(t.error(v+' Adding a marker to an overlay needs a overlay of the type "group" or "featureGroup"'),!1)},b=function(n,i,r,u,f,e,o,h,c){var w,p,k,ft,et,d;for(w in n)if(!c[w]){if(w.search("-")!==-1){t.error('The marker can\'t use a "-" on his key name: "'+w+'".');continue}var l=y.copy(n[w]),b=y.getObjectDotPath(h?[h,w]:[w]),g=ht(f,w,h);if(a(g))d=a(d)?i[w]:undefined,tt(l,d,g,b,e,u,r);else{if(p=ut(l),k=(l?l.layer:undefined)||h,!a(p)){t.error(v+" Received invalid data on the marker "+w+".");continue}if(ct(p,f,w,h),a(l.message)&&p.bindPopup(l.message,l.popupOptions),a(l.group)&&(ft=a(l.groupOption)?l.groupOption:null,rt(p,l.group,ft,r)),y.LabelPlugin.isLoaded()&&a(l.label)&&a(l.label.message)&&p.bindLabel(l.label.message,l.label.options),a(l)&&(a(l.layer)||a(h))){if(et=lt(k,u,l,p,o.individual.doWatch,r),!et)continue}else a(l.group)||(r.addLayer(p),o.individual.doWatch||l.focus!==!0||p.openPopup());o.individual.doWatch&&nt(p,b,e,u,r,o.individual.doWatch);it(p,l,e,o.individual.doWatch,r);s.bindEvents(p,b,l,e,k)}}},k=function(i,r,u,f,e){var c=!1,l=!1,s,h,p=a(r);for(var o in u)c||(t.debug(v+"[markers] destroy: "),c=!0),p&&(h=i[o],s=r[o],l=n.equals(h,s)&&f),a(i)&&Object.keys(i).length&&a(i[o])&&Object.keys(i[o]).length&&!l||e&&y.isFunction(e)&&e(h,s,o)},d=function(n,i,r,u,f){k(n,i,r,!1,function(n,i,e){t.debug(v+"[marker] is deleting marker: "+e);ft(r[e],u,f);delete r[e]})},g=function(n,i,r){var u={};return k(n,i,r,!0,function(n,i,r){t.debug(v+"[marker] is already rendered, marker: "+r);u[r]=n}),u};return{restrict:"A",scope:!1,replace:!1,require:["leaflet","?layers"],link:function(n,t,i,f){var o=f[0],e=o.getLeafletScope();o.getMap().then(function(n){var t={},h,o,s;h=a(f[1])?f[1].getLayers:function(){var n=r.defer();return n.resolve(),n.promise};o=e.markersWatchOptions||et;a(i.watchMarkers)&&(o.doWatch=o.individual.doWatch=!a(i.watchMarkers)||y.isTruthy(i.watchMarkers));s=a(i.markersNested)&&y.isTruthy(i.markersNested);h().then(function(r){var f=function(i,u){if(s){w.each(i,function(i,f){var e=a(e)?u[f]:undefined;d(i,e,t[f],n,r)});return}d(i,u,t,n,r)},h=function(i,u){f(i,u);var h=null;if(s){w.each(i,function(f,s){var c=a(c)?u[s]:undefined;h=g(i[s],c,t[s]);b(f,u,n,r,t,e,o,s,h)});return}h=g(i,u,t);b(i,u,n,r,t,e,o,undefined,h)};st(i.id,"markers",h,f);u.setMarkers(t,i.id);ot(e,"markers",o,function(n,t){h(n,t)})})})}}}]);n.module("leaflet-directive").directive("maxbounds",["$log","leafletMapDefaults","leafletBoundsHelpers","leafletHelpers",function(n,t,i,r){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(n,t,u,f){var e=f.getLeafletScope(),o=i.isValidBounds,s=r.isNumber;f.getMap().then(function(n){e.$watch("maxbounds",function(t){if(!o(t)){n.setMaxBounds();return}var r=i.createLeafletBounds(t);s(t.pad)&&(r=r.pad(t.pad));n.setMaxBounds(r);u.center||n.fitBounds(r)})})}}}]);n.module("leaflet-directive").directive("paths",["$log","$q","leafletData","leafletMapDefaults","leafletHelpers","leafletPathsHelpers","leafletEvents",function(n,t,i,r,u,f,e){return{restrict:"A",scope:!1,replace:!1,require:["leaflet","?layers"],link:function(o,s,h,c){var y=c[0],l=u.isDefined,p=u.isString,a=y.getLeafletScope(),w=a.paths,b=f.createPath,k=e.bindPathEvents,v=f.setPathOptions;y.getMap().then(function(f){var o=r.getDefaults(h.id),e;(e=l(c[1])?c[1].getLayers:function(){var n=t.defer();return n.resolve(),n.promise},l(w))&&e().then(function(t){var r={},e,s;i.setPaths(r,h.id);e=!l(h.watchPaths)||h.watchPaths==="true";s=function(n,i){var r=a.$watch('paths["'+i+'"]',function(i,u){var e,o;if(!l(i)){if(l(u.layer))for(e in t.overlays)o=t.overlays[e],o.removeLayer(n);f.removeLayer(n);r();return}v(n,i.type,i)},!0)};a.$watchCollection("paths",function(i){var w,y,h,c,d;for(w in r)l(i[w])||(f.removeLayer(r[w]),delete r[w]);for(y in i)if(y.search("\\$")!==0){if(y.search("-")!==-1){n.error('[AngularJS - Leaflet] The path name "'+y+'" is not valid. It must not include "-" and a number.');continue}if(!l(r[y])){if(h=i[y],c=b(y,i[y],o),l(c)&&l(h.message)&&c.bindPopup(h.message),u.LabelPlugin.isLoaded()&&l(h.label)&&l(h.label.message)&&c.bindLabel(h.label.message,h.label.options),l(h)&&l(h.layer)){if(!p(h.layer)){n.error("[AngularJS - Leaflet] A layername must be a string");continue}if(!l(t)){n.error("[AngularJS - Leaflet] You must add layers to the directive if the markers are going to use this functionality.");continue}if(!l(t.overlays)||!l(t.overlays[h.layer])){n.error('[AngularJS - Leaflet] A marker can only be added to a layer of type "group"');continue}if(d=t.overlays[h.layer],!(d instanceof L.LayerGroup||d instanceof L.FeatureGroup)){n.error('[AngularJS - Leaflet] Adding a marker to an overlay needs a overlay of the type "group" or "featureGroup"');continue}r[y]=c;d.addLayer(c);e?s(c,y):v(c,h.type,h)}else l(c)&&(r[y]=c,f.addLayer(c),e?s(c,y):v(c,h.type,h));k(c,y,h,a)}}})})})}}}]);n.module("leaflet-directive").directive("tiles",["$log","leafletData","leafletMapDefaults","leafletHelpers",function(t,i,r,u){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(f,e,o,s){var h=u.isDefined,c=s.getLeafletScope(),l=c.tiles;if(!h(l)||!h(l.url)){t.warn("[AngularJS - Leaflet] The 'tiles' definition doesn't have the 'url' property.");return}s.getMap().then(function(t){var f=r.getDefaults(o.id),u;c.$watch("tiles",function(r){var e=f.tileLayerOptions,s=f.tileLayer;if(!h(r.url)&&h(u)){t.removeLayer(u);return}if(!h(u)){h(r.options)&&n.copy(r.options,e);h(r.url)&&(s=r.url);u=L.tileLayer(s,e);u.addTo(t);i.setTiles(u,o.id);return}if(h(r.url)&&h(r.options)&&!n.equals(r.options,e)){t.removeLayer(u);e=f.tileLayerOptions;n.copy(r.options,e);s=r.url;u=L.tileLayer(s,e);u.addTo(t);i.setTiles(u,o.id);return}h(r.url)&&u.setUrl(r.url)},!0)})}}}]);["markers","geojson"].forEach(function(t){n.module("leaflet-directive").directive(t+"WatchOptions",["$log","$rootScope","$q","leafletData","leafletHelpers",function(i,r,u,f,e){var s=e.isDefined,h=e.errorHeader,c=e.isObject,o=e.watchOptions;return{restrict:"A",scope:!1,replace:!1,require:["leaflet"],link:function(r,u,f,e){var l=e[0],a=l.getLeafletScope();l.getMap().then(function(){s(r[t+"WatchOptions"])&&(c(r[t+"WatchOptions"])?n.extend(o,r[t+"WatchOptions"]):i.error(h+"["+t+"WatchOptions] is not an object"),a[t+"WatchOptions"]=o)})}}}])});n.module("leaflet-directive").factory("leafletEventsHelpersFactory",["$rootScope","$q","$log","leafletHelpers",function(t,i,r,u){var c=u.safeApply,e=u.isDefined,s=u.isObject,h=u.isArray,f=u.errorHeader,o=function(n,t){this.rootBroadcastName=n;this.lObjectType=t};return o.prototype.getAvailableEvents=function(){return[]},o.prototype.genDispatchEvent=function(n,t,i,r,u,f,e,o){var s=this;return function(h){var c=s.rootBroadcastName+"."+n;s.fire(i,c,t,h,h.target||r,f,u,e,o)}},o.prototype.fire=function(i,r,u,f,o,s,h,l){c(i,function(){var c={leafletEvent:f,leafletObject:o,modelName:h,model:s};e(l)&&n.extend(c,{layerName:l});u==="emit"?i.$emit(r,c):t.$broadcast(r,c)})},o.prototype.bindEvents=function(n,t,i,u,o,c){var a=[],p="emit",l=this,v,y;return e(u.eventBroadcast)?s(u.eventBroadcast)?e(u.eventBroadcast[l.lObjectType])?s(u.eventBroadcast[l.lObjectType])?(e(u.eventBroadcast[this.lObjectType].logic)&&u.eventBroadcast[l.lObjectType].logic!=="emit"&&u.eventBroadcast[l.lObjectType].logic!=="broadcast"&&r.warn(f+"Available event propagation logic are: 'emit' or 'broadcast'."),v=!1,y=!1,e(u.eventBroadcast[l.lObjectType].enable)&&h(u.eventBroadcast[l.lObjectType].enable)&&(v=!0),e(u.eventBroadcast[l.lObjectType].disable)&&h(u.eventBroadcast[l.lObjectType].disable)&&(y=!0),v&&y?r.warn(f+"can not enable and disable events at the same time"):v||y?v?u.eventBroadcast[this.lObjectType].enable.forEach(function(n){a.indexOf(n)!==-1?r.warn(f+"This event "+n+" is already enabled"):l.getAvailableEvents().indexOf(n)===-1?r.warn(f+"This event "+n+" does not exist"):a.push(n)}):(a=this.getAvailableEvents(),u.eventBroadcast[l.lObjectType].disable.forEach(function(n){var t=a.indexOf(n);t===-1?r.warn(f+"This event "+n+" does not exist or has been already disabled"):a.splice(t,1)})):r.warn(f+"must enable or disable events")):r.warn(f+"event-broadcast."+[l.lObjectType]+" must be an object check your model."):a=this.getAvailableEvents():r.error(f+"event-broadcast must be an object check your model."):a=this.getAvailableEvents(),a.forEach(function(r){n.on(r,l.genDispatchEvent(r,p,u,n,t,i,o,c))}),p},o}]).service("leafletEventsHelpers",["leafletEventsHelpersFactory",function(n){return new n}]);n.module("leaflet-directive").factory("leafletGeoJsonEvents",["$rootScope","$q","$log","leafletHelpers","leafletEventsHelpersFactory","leafletLabelEvents","leafletData",function(n,t,i,r,u,f,e){var h=r.safeApply,c=r.isDefined,l=r,a=f,s=u,o=function(){s.call(this,"leafletDirectiveGeoJson","geojson")};return o.prototype=new s,o.prototype.genDispatchEvent=function(t,i,r,u,f,o,c,l){var a=s.prototype.genDispatchEvent.call(this,t,i,r,u,f,o,c),v=this;return function(i){t==="mouseout"&&(l.resetStyleOnMouseout&&e.getGeoJSON(l.mapId).then(function(n){var t=c?n[c]:n;t.resetStyle(i.target)}),h(r,function(){n.$broadcast(v.rootBroadcastName+".mouseout",i)}));a(i)}},o.prototype.getAvailableEvents=function(){return["click","dblclick","mouseover","mouseout",]},new o}]);n.module("leaflet-directive").factory("leafletLabelEvents",["$rootScope","$q","$log","leafletHelpers","leafletEventsHelpersFactory",function(n,t,i,r,u){var o=r,e=u,f=function(){e.call(this,"leafletDirectiveLabel","markers")};return f.prototype=new e,f.prototype.genDispatchEvent=function(n,t,i,r,u,f,o){var s=u.replace("markers.","");return e.prototype.genDispatchEvent.call(this,n,t,i,r,s,f,o)},f.prototype.getAvailableEvents=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu"]},f.prototype.genEvents=function(n,t,i,r,u,f,e){var s=this,h=this.getAvailableEvents(),c=o.getObjectArrayPath("markers."+u);h.forEach(function(n){r.label.on(n,s.genDispatchEvent(n,t,i,r.label,c,f,e))})},f.prototype.bindEvents=function(){},new f}]);n.module("leaflet-directive").factory("leafletMapEvents",["$rootScope","$q","$log","leafletHelpers","leafletEventsHelpers",function(n,t,i,r,u){var l=r.safeApply,f=r.isDefined,a=r.isObject,v=r,y=r.errorHeader,e=u.fire,o=function(){return["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","contextmenu","focus","blur","preclick","load","unload","viewreset","movestart","move","moveend","dragstart","drag","dragend","zoomstart","zoomend","zoomlevelschange","resize","autopanstart","layeradd","layerremove","baselayerchange","overlayadd","overlayremove","locationfound","locationerror","popupopen","popupclose","draw:created","draw:edited","draw:deleted","draw:drawstart","draw:drawstop","draw:editstart","draw:editstop","draw:deletestart","draw:deletestop"]},s=function(n,t,i){return function(r){var u="leafletDirectiveMap."+t;e(n,u,i,r,r.target,n)}},h=function(n){n.$broadcast("boundsChanged")},c=function(n,t,i,r){if(f(i.urlHashCenter)){var u=t.getCenter(),e=u.lat.toFixed(4)+":"+u.lng.toFixed(4)+":"+t.getZoom();f(r.c)&&r.c===e||n.$emit("centerUrlHash",e)}};return{getAvailableMapEvents:o,genDispatchMapEvent:s,notifyCenterChangedToBounds:h,notifyCenterUrlHashChanged:c}}]);n.module("leaflet-directive").factory("leafletMarkerEvents",["$rootScope","$q","$log","leafletHelpers","leafletEventsHelpersFactory","leafletLabelEvents",function(n,t,i,r,u,f){var s=r.safeApply,h=r.isDefined,c=r,l=f,o=u,e=function(){o.call(this,"leafletDirectiveMarker","markers")};return e.prototype=new o,e.prototype.genDispatchEvent=function(t,i,r,u,f,e,h){var c=o.prototype.genDispatchEvent.call(this,t,i,r,u,f,e,h);return function(i){t==="click"?s(r,function(){n.$broadcast("leafletDirectiveMarkersClick",f)}):t==="dragend"&&(s(r,function(){e.lat=u.getLatLng().lat;e.lng=u.getLatLng().lng}),e.message&&e.focus===!0&&u.openPopup());c(i)}},e.prototype.getAvailableEvents=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu","dragstart","drag","dragend","move","remove","popupopen","popupclose","touchend","touchstart","touchmove","touchcancel","touchleave"]},e.prototype.bindEvents=function(n,t,i,r,u){var f=o.prototype.bindEvents.call(this,n,t,i,r,u);c.LabelPlugin.isLoaded()&&h(n.label)&&l.genEvents(t,f,r,n,i,u)},new e}]);n.module("leaflet-directive").factory("leafletPathEvents",["$rootScope","$q","$log","leafletHelpers","leafletLabelEvents","leafletEventsHelpers",function(n,t,i,r,u,f){var p=r.safeApply,s=r.isDefined,h=r.isObject,c=r,e=r.errorHeader,l=u,a=f.fire,v=function(n,t,i,r,u,f,e){return function(o){var s="leafletDirectivePath."+n;a(i,s,t,o,o.target||r,f,u,e)}},y=function(n,t,r,u){var y=[],f,a,b="broadcast",p,w,k;if(s(u.eventBroadcast))if(h(u.eventBroadcast))if(s(u.eventBroadcast.path))if(h(u.eventBroadcast.paths))i.warn(e+"event-broadcast.path must be an object check your model.");else if(u.eventBroadcast.path.logic!==undefined&&u.eventBroadcast.path.logic!==null&&(u.eventBroadcast.path.logic!=="emit"&&u.eventBroadcast.path.logic!=="broadcast"?i.warn(e+"Available event propagation logic are: 'emit' or 'broadcast'."):u.eventBroadcast.path.logic==="emit"&&(b="emit")),p=!1,w=!1,u.eventBroadcast.path.enable!==undefined&&u.eventBroadcast.path.enable!==null&&typeof u.eventBroadcast.path.enable=="object"&&(p=!0),u.eventBroadcast.path.disable!==undefined&&u.eventBroadcast.path.disable!==null&&typeof u.eventBroadcast.path.disable=="object"&&(w=!0),p&&w)i.warn(e+"can not enable and disable events at the same time");else if(p||w)if(p)for(f=0;f<u.eventBroadcast.path.enable.length;f++)a=u.eventBroadcast.path.enable[f],y.indexOf(a)!==-1?i.warn(e+"This event "+a+" is already enabled"):o().indexOf(a)===-1?i.warn(e+"This event "+a+" does not exist"):y.push(a);else for(y=o(),f=0;f<u.eventBroadcast.path.disable.length;f++)a=u.eventBroadcast.path.disable[f],k=y.indexOf(a),k===-1?i.warn(e+"This event "+a+" does not exist or has been already disabled"):y.splice(k,1);else i.warn(e+"must enable or disable events");else y=o();else i.error(e+"event-broadcast must be an object check your model.");else y=o();for(f=0;f<y.length;f++){a=y[f];n.on(a,v(a,b,u,y,t))}c.LabelPlugin.isLoaded()&&s(n.label)&&l.genEvents(t,b,u,n,r)},o=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu","add","remove","popupopen","popupclose"]};return{getAvailablePathEvents:o,bindPathEvents:y}}])})(angular);
/*
//# sourceMappingURL=angular-leaflet-directive.min.js.map
*/